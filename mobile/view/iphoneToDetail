let detailPlugIn = function () {
    let self = this
    /**
     * 深度链接插件的配置
     */
    let app = {
        /**
         * 配置的构造者
         */
        initialize() {
            this.bindEvents();
        },

        /**
         * 绑定事件的监听者
         */
        bindEvents() {
            document.addEventListener('deviceready', this.onDeviceReady, false);
        },

        /**
         * 插件准备状态，在此写一些处理事件
         * 这些函数名来自于cordova配置文件中
         */
        onDeviceReady() {
            console.log('Handle deviceready event if you need');
            universalLinks.subscribe('openGoodsListPage', app.onGoodsListPageRequested);
            universalLinks.subscribe('openGoodsDetailedPage', app.onGoodsDetailedPageRequested);
            universalLinks.subscribe('launchedAppFromLink', app.onApplicationDidLaunchFromLink);
        },

        /**
         * ‘taoquanw://taoquanGoods.com/good/’通过此链接打开应用触发此方法
         */
        onGoodsListPageRequested(eventData) {
            console.log('Showing to user list of awesome goods');

        },

        /**
         * ‘taoquanw://taoquanGoods.com/good/......’通过此链接打开应用触发此方法
         */
        onGoodsDetailedPageRequested(eventData) {
            console.log('Showing to user details page for some goods');
        },

        /**
         * ‘taoquanw://taoquanGoods.com?query’通过此链接打开应用触发此方法
         * 取出查询参数，路由到相应详情页面
         */
        onApplicationDidLaunchFromLink(eventData) {
            console.log('Did launch app from the link: ' + eventData.url);
            console.log('good:' + getParameterByName(eventData.url, 'good'), 'pageId:' + getParameterByName(eventData.url, 'pageId'))
            let good = getParameterByName(eventData.url, 'good');
            let pageId = getParameterByName(eventData.url, 'pageId');
            switch (good) {
                case 'patent':
                    self.$router.loadPage(`/patent/detail?id=${pageId}`)
                    break;
                case 'trademark':
                    self.$router.loadPage(`/trademark/detail?id=${pageId}`)
                    break;
                default:
                    break;

            }
        }

    }

    app.initialize();

    function getParameterByName(url, name) {
        var match = RegExp('[?&&]' + name + '=([^&&]*)').exec(url);
        return match && match[1];
    }

}
export default detailPlugIn;